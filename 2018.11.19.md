# 2018.11.19 TIL## Acade### Player 코드 추가```using System.Collections;using System.Collections.Generic;using UnityEngine;public class AcadePlayer : MonoBehaviour{ 	public static AcadePlayer Instance { get; private set; }	public float Speed;	public enum Direction { STRAIGHT, RIGHT, LEFT }	public enum Limit { NONE, RIGHT, LEFT }	public Sprite[] SpriteDir;	public Sprite[] HitSpriteDir;	public GameObject BeamOrigin;	public AudioClip ItemSound;	public AudioClip ExplosionSound;	private AudioSource audioSource;	private bool isHit;	private int life;	SpriteRenderer sprites;	private const int motionDistance = 4;	BLEBridge bridge;	Limit limit = Limit.NONE;	Direction direction;	// Use this for initialization	void Start()	{		Instance = this;		bridge = BLEBridge.Instance;		bridge.SetAction(OnReceiveData);		sprites = GetComponent<SpriteRenderer>();		audioSource = GetComponent<AudioSource>();		direction = Direction.STRAIGHT;		InvokeRepeating("RegenBeam", 3, 0.2f);		life = 5;		isHit = false;	}	// Update is called once per frame	void Update()	{		if(!AcadeGameManager.Instance.isPlaying) return;				/*		if (Input.GetKey(KeyCode.LeftArrow)) direction = Direction.LEFT;		else if (Input.GetKey(KeyCode.RightArrow)) direction = Direction.RIGHT;		else direction = Direction.STRAIGHT;		*/		if (direction == Direction.LEFT) MoveLeft();		else if (direction == Direction.RIGHT) MoveRight();		if (!isHit) { sprites.sprite = SpriteDir[(int)direction]; }		else { sprites.sprite = HitSpriteDir[(int)direction]; }	}	void RegenBeam()	{		if (AcadeGameManager.Instance.isPlaying)		{			GameObject beamL = (GameObject)Instantiate(BeamOrigin, this.transform.position+this.transform.up, Quaternion.identity);			beamL.SetActive(true);			beamL.transform.position = this.transform.localPosition + new Vector3(0, 0.2f, 0);		}	}	void OnReceiveData(BLEBridge.BLEMotionData motionData)	{		Debug.Log("Receive Motion Data");		Debug.Log(motionData);		if (motionData.leftDistance > motionDistance) direction = Direction.LEFT;		else if (motionData.rightDistance > motionDistance) direction = Direction.RIGHT;		else direction = Direction.STRAIGHT;	}		void MoveRight()	{		if (!AcadeGameManager.Instance.isPlaying) return;		if (limit != Limit.RIGHT && this.transform.position.x < 3.2)		{			this.transform.position += new Vector3(0.01f * Speed, 0.0f, 0.0f);			limit = Limit.NONE;		}	}	void MoveLeft()	{		if (!AcadeGameManager.Instance.isPlaying) return;		if (limit != Limit.LEFT && this.transform.position.x > -3.2)		{			this.transform.position += new Vector3(-0.01f * Speed, 0.0f, 0.0f);			limit = Limit.NONE;		}	}	IEnumerator Hit()	{		yield return new WaitForSeconds(0.15f);		isHit = false;	}	public void OnCollisionEnter2D(Collision2D collision)	{		if (collision.transform.tag == "Star")		{			AcadeGameManager.Instance.score += 100;			GameObject.Destroy(collision.gameObject);			audioSource.PlayOneShot(ItemSound, 0.5f);		}		else if (collision.transform.tag == "Obstacles" || collision.transform.tag == "Bullet")		{			AcadeEffectManager.Instance.PlayEffect(AcadeEffectManager.EffectNum.BURST, collision.contacts[0].point);			AcadeUIManager.Instance.healthBarDecrease();			isHit = true;			StartCoroutine(Hit());			audioSource.PlayOneShot(ExplosionSound, 2f);		}		else if (collision.transform.tag == "SpeedItem")		{			GameObject.Destroy(collision.gameObject);			this.Speed *= 1.1f;			audioSource.PlayOneShot(ItemSound, 0.5f);		}		else if (collision.transform.tag == "HeartItem")		{			GameObject.Destroy(collision.gameObject);			AcadeUIManager.Instance.healthBarIncrease();			audioSource.PlayOneShot(ItemSound, 0.5f);		}	}}```1. Item과 Star를 먹는 순간 ItemSound 재생. (뿅뿅)2. Obstacles나 Bullet에 맞는 순간 ExplosionSound 재생 (콰앙)3. 방향키 입력이 일어나는 순간에는 Direction만 수정하고, Update에서 Direction에 따라 좌우이동 (키보드 입력 코드와 동시 사용하면 오류발생)4. Update에서 isHit(맞았을때 isHit가 true가 되고, Hit() 호출)가 true라면 HitSpriteDir를 sprite로 지정, IEnumerator인 Hit()을 이용해 0.15초만 지속하도록 한 뒤 isHit를 false로 바꿈.### 기타 수정사항1. Obstacle들이 Player와 충돌하면 제거되도록 함.2. SpaceShip과 Meteor를 부쉈을 때 점수 추가, Star의 점수 증가.### 앞으로 할 일1. 테두리 설정, 게임 화면 고정.2. 아이템 추가.3. 피버타임..?4. 움직임을 담당하는 모든 코드를 시간바탕으로 움직이도록 함. deltatime!