# 2018.12.03 TIL## Shader### Water Shader```Shader "Custom/WaterShader"{    Properties    {        _MainTex ("Texture", 2D) = "white" {}        _NormalTex ("Normal Map", 2D) = "white" {}    }    SubShader    {        Tags { "RenderType"="Opaque" }        LOD 100        Pass        {            CGPROGRAM            #pragma vertex vert            #pragma fragment frag            // make fog work            #pragma multi_compile_fog                        #include "UnityCG.cginc"            struct appdata            {                float4 vertex : POSITION;                float2 uv : TEXCOORD0;            };            struct v2f            {                float2 uv : TEXCOORD0;                UNITY_FOG_COORDS(1)                float4 vertex : SV_POSITION;            };                        sampler2D _NormalTex;            sampler2D _MainTex;                        float4 _NormalTex_ST;            float4 _MainTex_ST;                        v2f vert (appdata v)            {                v2f o;                o.vertex = UnityObjectToClipPos(v.vertex);                o.uv = v.uv;                o.uv = TRANSFORM_TEX(v.uv, _MainTex);                //UNITY_TRANSFER_FOG(o,o.vertex);                return o;            }                        fixed4 frag (v2f i) : SV_Target            {                // sample the texture                float2 normCoord = i.uv;                normCoord.x += _Time.x * 0.1;				normCoord.y += _Time.x *0.1;                fixed4 norm = tex2D(_NormalTex, normCoord);                // add normal to uv                                float2 coord = i.uv;                coord.xy += norm.xy * 0.01 * sin(_Time.x * 10 + i.uv.x * 0.1);                coord.xy *= 20;                coord.x += _Time.x;				coord.y += _Time.x;                                fixed4 col = tex2D(_MainTex, coord);                                // apply fog                UNITY_APPLY_FOG(i.fogCoord, col);                return col;            }            ENDCG        }    }}```1. _MainTex는 _NormalTex에 의해 움직일것이다.(실제로 Texture가 움직이는게 아닌, 색깔정보의 위치를 조금씩 바꾸는 매직!2. i.uv는 위치정보이다. (아주 기본적인 위치정보..!) 3. normCoord = i.uv로 위치정보를 바탕에 깔고, x나 y에 작은 수(_Time.x)를 더한값을 집어넣으면 위치정보가 옆의 위치정보로 대체되어, 조금씩 흐르는 효과를 준다.4.coord = i.uv로 위치정보를 바탕에 깔고, coord.xy 에다가 norm.xy를 더함으로써 픽셀마다 normal map의 수치를 더해서 uv에서 그것이 더해진 값의 위치정보를 불러온다.이 때, *0.01을 함으로써 텍스쳐의 원본에서 크게 벗어나지 ㅇ낳는 흔들림이 완성된다. 또한, *sin()을 통해 일정 주기를 가지고 흔들리는 효과를 불러올 수 있다. 추가로, sin 안에서 i.uv.x 의 정보를 사용하면, x위치에 따라, 흔들림이 적용되는 시간에 딜레이가 생겨서 파도같은 효과를 낼 수 있다.5. frag에서 coord.xy의 값에 20을 곱하면 20*20으로 Tiling된다. 그러나 오브젝트의 크기를 늘리지는 못한다.6. coord.x에 일정 수치를 더하면, uv가 그만큼 이동한다. (흐르는 느낌)### 이론1. frag shader : 픽셀셰이더. 면의 정보, 즉 색상정보를 다룸.  vert shader : vertex의 점의 정보 제어. 기하정보(위치정보)를 다룸.  surf shader : vert + frag shader2. normal map : 꼭짓점의 방향을 제어. map 의 xyz를 rgb에 매칭하여 형태를 정의한다.  bump map : normal map과 비슷하지만, 질감을 나타낸다.  specular map : 하얀 부분의 반사정도를 높게 한다.  Illuminate map : 발광체임을 나타낸다. *빛을 내기만 하고, 광체가 되지는 않는다.3. frag(v2f i)에서 i는 픽셀의 인풋을 의미한다.4. tex2D : Texture와 UV를 넣으면 해당 texture에서 uv위치에 해당하는 color를 float4등의 형식으로 return한다.5. sampler2D : 텍스쳐의 데이터 형태6. float4 : 색깔의 데이터 형태. 텍스쳐가 선언될때 함께 쓰인다. 직접적인 사용은 없지만, 선언하지 않으면 에러발생.(텍스쳐 스케일 및 오프셋이 적절한지 확인하는 기능)7. 결론 : 사서 쓰자## 내일할일1. 내적 (+반사각)공부2. specular map 사용법 찾아보기3. 팜플렛 만들기 제발 이놈들아 곡설명좀 줘 ㅓㅁ 시저ㅣㅜㅇ훔;ㅎㄷ;ㅁ험