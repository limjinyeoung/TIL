# 2018.10.14 TIL ## Poo Game### Android export 하기1. 오늘 뭘 한건지 모르겠다.2. Android export 를 위해 minimum API Level과 maximum API Level이 정해져 있어야 함 (나같은 경우는 lollipop - oreo였다. 이게 대체..?)3. JDK (Java)와 Android Studio가 설치되어있어야 한다. ( Android Studio에서 API를 설치했던듯...?)4. ExportProject에 체크하면 Project가 폴더로 따로 저장된다.5. ExportProject를 체크 해제하면 Apk가 저장되며, Build And Run을 실행하면 연결된 기기(안드로이드)로 바로 실행된다.### BLEBridge1. 안드로이드가 아닌 기기(펑키..?)에서의 입력을 하드웨어가 해석하는 방법 인듯 하다...2. 좌우의 줄이 늘어나는 정도에 따라 좌 몇, 우 몇...으로 입력을 받은데, 이것을 내가 사용할 때에는 아래와 같이 쓴다.```using System.Collections;using System.Collections.Generic;using UnityEngine;using System;public class PooPlayer : MonoBehaviour{	public enum Direction {STOP, RIGHT, LEFT }	public float speed;	public Sprite[] runAnim;	float destination;	int animIndex;	SpriteRenderer sprites;	float animCount;	public const int MOVE_STOP = 0;	public const int MOVE_LEFT = 1;	public const int MOVE_RIGHT = 2;	private const int motionDistance = 4;	BLEBridge bridge;	Direction direction = Direction.STOP;	    void Start()	{		animIndex = 0;		sprites = GetComponent<SpriteRenderer>();		animCount = 0.0f;		bridge = BLEBridge.Instance;		bridge.SetAction(OnReceiveData);	}	void OnReceiveData(BLEBridge.BLEMotionData motionData)	{		Debug.Log("Receive Motion Data");		Debug.Log(motionData);		if (motionData.leftDistance > motionDistance) direction = Direction.LEFT;		else if (motionData.rightDistance > motionDistance) direction = Direction.RIGHT;		else direction = Direction.STOP;	}	// Update is called once per frame	void MoveLeft(){        if (!PooGameManager.Instance.isPlaying) return;        if (this.transform.position.x > -Screen.width / 100)		{			sprites.flipX = true;			destination = this.transform.position.x - 0.5f;		}    }    void MoveRight(){        if (!PooGameManager.Instance.isPlaying) return;        if (this.transform.position.x < Screen.width / 100)		{			sprites.flipX = false;			destination = this.transform.position.x + 0.5f;		}    }	void Update()	{        if (PooGameManager.Instance.isPlaying)		{			//if (Input.GetKey(KeyCode.LeftArrow)) direction = Direction.LEFT;			//if (Input.GetKey(KeyCode.RightArrow)) direction = Direction.RIGHT;			if (direction == Direction.LEFT) MoveLeft();            else if (direction == Direction.RIGHT) MoveRight();			            this.transform.position += new Vector3((destination - transform.position.x) * 0.1f*speed, 0.0f, 0.0f);			animCount += Time.deltaTime;			if (animCount > 0.2f)			{				animCount -= 0.2f;				animIndex++;				if (animIndex >= runAnim.Length)				{					animIndex = 0;				}				sprites.sprite = runAnim[animIndex];			}		}	}		public void OnCollisionEnter2D(Collision2D collision)	{		if(collision.transform.tag == "Bomb")		{			PooGameManager.Instance.GameOver();		}	}}``` - bridge.Instance를 start에서 받아서, SetAction의 Interface로 OnReceiveData 함수를 실행하도록 한다. - 이 때 좌우가 늘어난 정도가 일정 수치(motionDistance)를 넘게 되면 그에 따라 direction이 바뀌도록 한다.- SetDirection함수를 지우는 대신 MoveLeft, MoveRight 함수에서 모두 처리한다. - 플레이어의 경로 한계를 정하기 어렵다 어떻게 하지 (매우 심한욕) 