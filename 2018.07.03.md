﻿# 2018.07.03 TIL## Unity - Overwatch### animation```using System.Collections;using System.Collections.Generic;using UnityEngine;public class Player : MonoBehaviour {    public float jumpSpeed;    public float speed;    private Rigidbody rb;    private Vector3 vMouse = new Vector3();    private Vector3 movingVector;    private bool isJumping;    private string animationPlaying = "Idle";    private string animationPlayingFinal = "Idle";    private Animation Ani;//    public AnimationClip[] clips;    // Use this for initialization    void Start () {        rb = GetComponent<Rigidbody>();        isJumping = true;        Ani = this.GetComponent<Animation>();        animationPlaying = "Idle";        Ani.Play(animationPlaying);    }    // Update is called once per frame    void Update()    {        movingVector = new Vector3(0, 0, 0);        animationPlaying = "Idle";        if (Input.GetKey(KeyCode.D))        {            movingVector += this.transform.right* 0.1f;            animationPlaying = "Move";        }        if (Input.GetKey(KeyCode.A))        {            movingVector += this.transform.right*-0.1f;            animationPlaying = "Move";        }        if (Input.GetKey(KeyCode.W))        {            movingVector += this.transform.forward*0.1f;            animationPlaying = "Move";        }        if (Input.GetKey(KeyCode.S))        {            movingVector = this.transform.forward*-0.1f;            animationPlaying = "Move";        }        rb.velocity = new Vector3(movingVector.normalized.x*speed, rb.velocity.y, movingVector.normalized.z*speed);        if (Input.GetKeyDown(KeyCode.Space))        {            if (!isJumping) jump();        }        Vector3 deltaMousePosition = Input.mousePosition - vMouse;        this.transform.Rotate(this.transform.up * deltaMousePosition.x);        this.vMouse = Input.mousePosition;                if (animationPlayingFinal.Equals(animationPlaying))        {            Ani.CrossFade(animationPlaying);        }        animationPlayingFinal = animationPlaying;            }    private void OnCollisionEnter(Collision collision)    {        isJumping = false;    }    private void jump()    {        rb.AddForce(Vector3.up * jumpSpeed);        isJumping = true;    }}```1. animation  - animation은 component이다. - 이미 component에 animation이 할당되어있다면, animation.play("animation이름");으로 재생시킬 수 있다. 2. animationClip - animationClip은 (Object) 데이터형식이다. - component에 없는 animation을 외부에서 추가하고 싶을 때 animation.addClip(clipName, "animation이름");으로 추가하여 사용할 수 있다.3. animation의 부드러운 재생 - stop메소드가 있지만, 쓰지 않는것이 좋다. (애니메이션 재생중에 멈추면 그 동작이 유지됨.) - crossFade메소드를 통해 자연스레 다음 애니메이션으로 연결하는것이 좋다.4. enemy Script```using System.Collections;using System.Collections.Generic;using UnityEngine;public class Enemy : MonoBehaviour {    private Animation Ani;    // Use this for initialization    void Start () {        Ani = this.GetComponent<Animation>();        if (!Ani.isPlaying)        {            Ani.CrossFade("Idle");        }    }		// Update is called once per frame	void Update () {		if(!Ani.isPlaying) Ani.Play("Idle");    }    private void OnCollisionEnter(Collision collision)    {        if (collision.transform.tag == "Player") {                    Ani.Play("Death");        }    }}```