﻿﻿# 2019.01.25 TIL## NGUI### Grid1. Grid는 항상 활성화되지는 않는 script이므로, 활성화 해야 정렬이 된다. (업뎃은 셀프)2. HideInactive에 체크하면, 비활성화인 GameObject는 정렬에서 제외한다.## List와 데이터 관리### BaseList```using System.Collections;using System.Collections.Generic;using UnityEngine;public class BaseList<T> : MonoBehaviour{  public List<BaseListItem<T>> list;  public GameObject ListItem;  UIGrid grid;  // Start is called before the first frame update  private void Awake()  {    list = new List<BaseListItem<T>>();    grid = this.GetComponent<UIGrid>();    ListItem.SetActive(false);  }  public void GenerateItem(T data)  {    BaseListItem<T> item = GameObject.Instantiate(ListItem).GetComponent<BaseListItem<T>>();    item.transform.parent = this.transform;    item.transform.localScale = Vector3.one;    item.transform.localPosition = Vector3.zero;    item.gameObject.SetActive(true);    item.Init(data);    Reposition();  }  public void Reposition()  {    grid.repositionNow = true;  }  public void UpdateItem()  {  }}```1. BaseList는 Item들의 List를 관리하는 클래스들의 부모 역할을 한다.2. List들을 관리하는 모든 클래스들이 공통적으로 가지는 list, Grid, GenerateItem, Reposition, UpdateItem등을 가지고 있다.3. List에서 관리하는 Item들은 모두 자기의 하위 Object로 초기화 해야 한다.### ListUserSkill```public class ListUserSkill : BaseList<UserSkill>{}```1. BaseList의 자식 클래스로, BaseList의 모든 메소드를 사용한다. 2. 이후 BaseList와 다른 추가사항이 있다면 메소드를 쉽게 추가할 수 있다.### BaseListItem```using System.Collections;using System.Collections.Generic;using UnityEngine;public abstract class BaseListItem<T> : MonoBehaviour{	public abstract void Init(T data);	public abstract void OnClick();}```1. BaseListItem은 List에 정렬될 Item들의 클래스의 부모 역할을 한다.2. 모든 Item클래스들이 공통적으로 가지는 Init과 OnClick 메소드를 가지고 있다.3. Init은 abstract로 생성하여 어떤 데이터 형식이 어떻게 처리될 지에 대해 자식 클래스가 따로 정하도록 한다.### ListItemUserSkill```public class ListItemUserSkill : BaseListItem<UserSkill>{	public UILabel LabelSkillName;	public UILabel LabelSkillLevel;	public override void Init(UserSkill data)	{		LabelSkillName.text = data.name;		LabelSkillLevel.text = data.level + "";	}	public override void OnClick()	{		//todo	}}```1. BaseListItem을 상속받는 Skill Item 클래스이다.2. BaseListItem의 abstract메소드들을 override한다. ### UserSkill```public class UserSkill{  public string name;  public int id;  public int level;}```1. 스킬 데이터 (스킬의 정보)2. ListItemUserSkill의 Init 시 필요한 데이터 형식이다.### TestList```using System.Collections;using System.Collections.Generic;using UnityEngine;public class TestList : MonoBehaviour{  public ListUserSkill listUserSkill;  public UserSkill[] data;  // Start is called before the first frame update  void Start()  {    data = new UserSkill[3];    data[0] = new UserSkill();    data[0].level = 100;    data[0].name = "스킬 0";    data[1] = new UserSkill();    data[1].level = 200;    data[1].name = "스킬 1";    data[2] = new UserSkill();    data[2].level = 1000;    data[2].name = "스킬 2";    foreach (var d in data)    {      listUserSkill.GenerateItem(d);    }  }}```1. List 들을 테스트하는 코드.2. ListUserSkill을 관리하고, GenerateItem을 실행한다. (메인 실행 코드)