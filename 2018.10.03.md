# 2018.10.03 TIL## PooGame###PooPlayer Script```using System.Collections;using System.Collections.Generic;using UnityEngine;public class PooPlayer : MonoBehaviour{	public enum Direction { RIGHT, LEFT }	public float speed ;	public Sprite[] runAnim;	float destination;	Direction direction = Direction.RIGHT;	float accel;	int animIndex;	SpriteRenderer sprites;	float animCount;	// Use this for initialization	void Start()	{		accel = 0.0f;		animIndex = 0;		sprites = GetComponent<SpriteRenderer>();		animCount = 0.0f;	}	// Update is called once per frame	void Update()	{		if (Input.GetKey("left"))		{			if (this.transform.position.x > -2f)				SetDirection(Direction.LEFT);		}		if (Input.GetKey("right"))		{			if (this.transform.position.x < 2f)				SetDirection(Direction.RIGHT);		}		this.transform.position += new Vector3((destination - transform.position.x) * 0.1f, 0.0f, 0.0f);		animCount += Time.deltaTime;		if (animCount > 0.5f)		{			animCount -= 0.5f;			animIndex++;			if (animIndex >= runAnim.Length)			{				animIndex = 0;			}			sprites.sprite = runAnim[animIndex];		}	}	public void SetDirection(Direction direction)	{		var rotation = gameObject.transform.localRotation;		switch (direction)		{			case Direction.RIGHT:				sprites.flipX = false;				destination = this.transform.position.x + 0.5f;				break;			case Direction.LEFT:				sprites.flipX = true;				destination = this.transform.position.x - 0.5f;				break;			default:				Debug.LogError("Direction Input Error");				break;		}	}	public void OnCollisionEnter2D(Collision2D collision)	{		if(collision.transform.tag == "Bomb")		{			PooGameManager.Instance.GameOver();		}	}}```1.  Update()에서 GetKey하고, Direction만 수정하도록 한다. (+좌 우의 화면 크기를 고려하여 if문으로 제한한다.)2. Direction을 수정 할 때에는 SetDirection 메소드를 이용하는데, 이 때에 Direction을 수정함과 동시에 sprite의 flipX를 수정하며, (Right라면 false, left라면 true) destination을 지정하여 Update()시에 이동할 방향을 제시하도록 한다.3. Update()에서는 (destination-position)*0.1f의 방법을 통해 미끄러지듯 이동하는 효과를 줄 수 있다.4. 애니메이션(스프라이트 변경) 코드는 방향에 상관없이 항상 달리고 있다.5. OnCollisionEnter2D 메소드에서는, Bomb와 부딪혔을때 PooGameManager의 GameOver를 실행하도록 한다. ### PooBomb Script```using System.Collections;using System.Collections.Generic;using UnityEngine;public class PooBomb : MonoBehaviour {	public GameObject bomb;	public float Speed;	public static PooBomb Instance { get; private set; }	// Use this for initialization	void Start () {		Instance = this;		this.transform.position = new Vector3(Random.Range(-2.4f, 2.4f), 11f, 0f);	}		// Update is called once per frame	void Update () {		this.transform.position = new Vector3(this.transform.position.x, this.transform.position.y - 0.01f*Speed, 0);	}	public void GenerateBomb()	{		GameObject go = Instantiate(bomb);	}	public void OnCollisionEnter2D(Collision2D collision)	{		if(collision.transform.tag == "Ground")		{			Destroy(this.gameObject);		}	}}```1. public으로 bomb를 사전에 입력받고 Instantiate할 표본을 선언한다. 2. Start()시에는 폭탄의 위치를 Random으로 설정하도록 한다.3. GenerateBomb 메소드는 PooGameManager script에서 접근할 수 있도록 public으로 해야하며, Instantiate(bomb)로 bomb 게임 오브젝트를 생성하도록 한다.4. OnCollisionEnter2D 메소드는, 폭탄이 Ground(땅)에 닿았을 때 사라지도록 한다.### PooGameManager Script```using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.SceneManagement;public class PooGameManager : MonoBehaviour {	public float regenTime;	public static PooGameManager Instance { get; private set; }	float count = 0.0f;	// Use this for initialization	void Start () {		Instance = this;	}		// Update is called once per frame	void Update () {		count += Time.deltaTime;		if(count >= regenTime)		{			count -= regenTime;			PooBomb.Instance.GenerateBomb();			Debug.Log("Generate Bomb");		}	}	public void GameOver()	{		SceneManager.LoadScene(SceneManager.GetActiveScene().name);	}}```1. regenTime은 폭탄이 생성되는 시간으로, 외부에서 사전에 입력받아 난이도를 조절할 수 있도록 하는 역할이다.2. Update때에는 RegenTime마다 PooBomb.GenerateBomb()를 통해 폭탄을 생성한다.3. GameOver() 메소드가 호출되면, 게임을 리셋한다.(후에, 리셋이 아닌 GameOver Popup창이 뜨도록 변경할 것.)