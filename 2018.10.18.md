# 2018.10.18 TIL## BB Game### Break Brick Game1. 2D벽돌게임.2. 좌우로만 바가 움직이고, 공을 튀겨서 벽돌을 부수는 게임3. 모든 벽돌을 깨면 레벨이 올라가고 벽돌이 점점더 단단해 지고, 공의 움직임이 빨라짐.4. 화면 비율이 달라질수록, camera size를 조절하도록 한다.### BackGround1. 배경은 background와 limit로 구성된다.2. background는 2D sprite로, 적당한 크기로 만든다.3. limits는 left, right, top, bottom 4개의 선(과 같은 직사각형) sprite인데, 이 네개의 gameobject에 collider 2D를 add하여 충돌을 검사할 수 있도록 한다.4. 각 limit들에 tag를 따로 지정하여 후에 bar나 ball과의 충돌 검사시에 사용하도록 한다.### Bar```using System.Collections;using System.Collections.Generic;using UnityEngine;public class Bar : MonoBehaviour {	public float speed;	public enum Direction { STOP, RIGHT, LEFT }	public enum Limit { NONE, RIGHT, LEFT }	Limit limit = Limit.NONE;	float destination;	Direction direction = Direction.STOP;	// Use this for initialization	void Start () {			}		// Update is called once per frame	void Update () {		/*		if (Input.GetKey(KeyCode.LeftArrow)) direction = Direction.LEFT;		if (Input.GetKey(KeyCode.RightArrow)) direction = Direction.RIGHT;		if (direction == Direction.LEFT) MoveLeft();		else if (direction == Direction.RIGHT) MoveRight();		*/		if (Input.GetKey(KeyCode.LeftArrow)) MoveLeft();		if (Input.GetKey(KeyCode.RightArrow)) MoveRight();	}	void MoveLeft()	{		if (limit != Limit.LEFT)		{			this.transform.position += new Vector3(-0.01f * speed, 0.0f, 0.0f);			limit = Limit.NONE;		}	}	void MoveRight()	{		if (limit != Limit.RIGHT)		{			this.transform.position += new Vector3(0.01f * speed, 0.0f, 0.0f);			limit = Limit.NONE;		}	}	public void OnCollisionEnter2D(Collision2D collision)	{		if(collision.transform.tag == "LimitLeft")		{			limit = Limit.LEFT;		}		if (collision.transform.tag == "LimitRight")		{			limit = Limit.RIGHT;		}	}}```1. Bar는 방향키입력을 받으면 즉각적으로 움직인다.2. Bar에 rigidbody 2d를 add하여 limit와의 충돌을 검사할 수 있도록 한다.3. OnCollision 이벤트 발생시 Limit의 좌 우를 확인하고 그 이상 bar가 이동하지 못하게 제한한다.### Ball1. Ball의 이동벡터 계산은 내일합시다2. Ball에 rigidbody 2d를 add하여 limit나 bar와의 충돌을 검사할 수 있도록 한다.### Brick```using System.Collections;using System.Collections.Generic;using UnityEngine;public class Brick : MonoBehaviour {	// Use this for initialization	void Start () {			}		// Update is called once per frame	void Update () {			}	public void OnCollisionEnter2D(Collision2D collision)	{		if (collision.transform.tag == "Ball")			GameObject.Destroy(this.gameObject);	}}```1. Brick은 충돌검사후에 Ball과 충돌하였을 시에는 GameObject를 파괴하도록 한다.2. 후에, 강도나 색깔에 대한 정보를 추가해도 좋을 듯 하다.### MapManager```using System.Collections;using System.Collections.Generic;using UnityEngine;public class BBMapManager : MonoBehaviour {	public const float LeftLimit = -2.5f;	public const float TopLimit = 4f;	public const float width = 5;	public const float height = 4;	public const float x = 0.5f;	public const float y = 0.25f;	public GameObject BrickOrigin;	// Use this for initialization	void Start () {		for (int j = 0; j <= height / y; j++) {			for (int i = 0; i <= width / x; i++){				GameObject brick = GameObject.Instantiate(BrickOrigin);				brick.SetActive(true);				brick.transform.position = new Vector3(LeftLimit + i * x, TopLimit - j * y, 0);			}		}	}		// Update is called once per frame	void Update () {			}}```1. MapManager는 게임이 시작됨과 동시에 BrickOrigin을 여러개 클론하여 벽돌 맵을 만드는 역할을 한다.2. 고정된 맵의 총 넓이와 높이, brick의 x, y 크기를 사용한 반복문을 통해 BrickOrigint를 Instantiate한다.3. 후에 데이터로 맵의 정보를 불러올 수도 있겠지만, 시간이 남으면 해보자.