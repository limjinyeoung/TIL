# 2018.07.12 TIL## Unity - Overwatch### GNUI1. GNUI : UI툴. unity ui툴의 단점을 보완한 Atlas 기능으로 인해 유니티의 ui툴보다 인기가 많(았)다.2. Atlas : texture는 각각 하나의 파일(Png등)로 이루어져있는데, 이들을 각각 관리하기에는 너무 무거웠다. Atlas는 이 모든 텍스쳐들을 하나의 png로 묶어서, 각 텍스쳐의 정보를 이미지가 아닌, 이미지의 위치로 처리한다.(하나의 png파일로 여러개의 텍스쳐 저장 가능) - Atlas만드는 방법 : Atlas폴더에서 우클릭후, [NGUI - Open Atlas Maker], new 클릭 후, texture들 선택후create3. UIRoot : GNUI의 ui 요소들을 총괄적으로 관리하는 상위 object(?). camera와 Panel로 구성. (이미지/텍스트)4. camera : 마우스의 위치를 자동으로 숨기는 기능이 있는데, 나의 fps에서는 이같은 기능이 불필요하기 때문에, Auto Hide Cursor를 해제한다.### Label1. UI 에서, text는 Panel의 하위 요소로서 [GNUI - create - Label]로 생성한다.2. UI Label이라는 script는, script로서의 모든 기능 수행이 가능하다. text내용을 포함한 여러가지 설정을 다른 script에서 조절할 수 있다. (public 변수)3. player script 중```public UILabel labelScore;....    private void OnCollisionEnter(Collision collision)    {        if (collision.transform.tag.Equals("Item_Gold"))        {            labelScore.text = (int.Parse(labelScore.text)+ 100).ToString();            GameObject.Destroy(collision.gameObject);        }        else isJumping = false;    }``` - labelScore 변수에는 Paner의 하위 요소로서 생성한 Label을 할당한다. - 아이템을 먹으면, labelScore의 숫자에서 100을 더하는 코드이다.### Sprite 이미지1. sprite는 Panel의 하위 요소로서 [GNUI - create - Sprite]로 생성한다.2. sprite로 사용되는 texture는 Atlas를 먼저 정한 후 그 안의 sprite를 지정하여 사용한다.3. sprite의 edit를 클릭하면, 해당 atlas의 정보를 수정할 수 있다. 하지만 온전한 texture의 사용 자체만이 목적이라면 이용할 이유가 없다.4. Type을 simple에서 sliced로 바꾸면, 이미지가 9조각으로 나뉘는 9patch 기능을 사용할 수 있다. (네개의 모서리는 그대로, 나머지 부분만 size를 늘리고 줄이는 방법.) sprite-edit에서 Border를 조정하는 것으로 각 구역을 지정하고 이미지를 효율적으로 관리할 수 있다.5. Anchors의 Type을 none에서 Unified로 바꾸면, 화면의 비율이나 크기에 맞추어 ui가 늘어나고 줄어든다. (그렇지 않으면, 화면의 크기가 바뀌어도 UI가 늘어나지 않아 붕 뜬 이상한 ui가 된다.### Effect1. Effect_HitSand - 총알이 바위나 모래산에 맞을 경우 모래 방울이 사방으로 튀는 효과 대신, 모래가 튀는 이미지(Splatter texture를 Particles/Additive셰이더로 material화)를 사방에서 볼 수 있도록 하는 효과를 적용시켰다. - 사방에서 보여야 하므로 Billboard render mode를 사용하고, 오차 없이 한 곳에서 실행되어야 하므로 shape는 아무 도형(box)이나 scale을 0으로 설정한다.  - 반복없이 짧은 시간동안 중심으로부터 모래가 튀는 이미지를 보여주어야 하므로, Lifetime을 0.6, Speed를 0으로 둔다. - 한번에 하나의 particle만 나오는 경우, Emission을 잘 조절해야하는데, Rate over Time을 1, Time을0, Count를1, Cycle을 1,Interval을 0 (=0.010)으로 맞추어 effect 시작과 동시에 하나의 particle이 실행되도록 한다. - 자연스러움 마감을 위해 Color over lifetime과 size over lifetime을 적용시켜 서서히 커지면서 연해지는 효과를 준다.2. Effect_Splatter - enemy가 jump하면 그 발 밑에서 일어나는 모래바람효과. - vertical Billboard를 이용해, 아래에서 위로의 방향성을 가지고 튀는 모래를 연출한다. (+앞으로 renderer를 조절할 때, MaxParticle size를 크게 수정해야 할 것!) - 점프 순간에 모래가 튀어야 하므로, Duration은 짧게, Lifetime은 1초(적당)로 둔다. 짧은 순간이니만큼 Rateover Time의 수치는 크게 주어 모래 먼지가 이는 효과를 증폭시킨다. - 점프한 공간을 중심으로 사방으로 퍼지는 모래의 효과를 위해, shape는 Circle로 정하고, Radius는 enemy의 크기에 맞게 준다. - 모래알갱이들은 순간적으로 위쪽으로 튀고, 중력에 의해 내려온다. 이러한 표현을 위해, Velocity over lifetime을 선택한 후 Linear의 Y를 증가시킨다. 또한 중력의 표현을 위해 force over Lifetime의 Y를 감소시킨다. - 자연스러운 표현을 위해 Color over Lifetime과 Size over Lifetime을 설정한다. (애정..)