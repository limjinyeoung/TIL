# 2018.11.20 TIL## Acade### Shield```using System.Collections;using System.Collections.Generic;using UnityEngine;public class Shield : MonoBehaviour {	// Use this for initialization	void Start () {			}		// Update is called once per frame	void Update () {			}	public void OnCollisionEnter2D(Collision2D collision)	{		if (collision.transform.tag == "Star")		{			AcadeGameManager.Instance.score += 200;		}		else if (collision.transform.tag == "Obstacles")		{			AcadeEffectManager.Instance.PlayEffect(AcadeEffectManager.EffectNum.BURST, collision.contacts[0].point);			AcadeGameManager.Instance.score += 200;		}		else if (collision.transform.tag == "SpeedItem")		{			AcadePlayer.Instance.Speed *= 1.1f;		}		else if (collision.transform.tag == "HeartItem")		{			AcadeUIManager.Instance.healthBarIncrease();		}	}}```1. shield는 Player를 감싸는 보호막 역할을 한다.2. shield에 닿는 모든 Obstacle들은 폭발하며 높은 점수를 준다. 3. shield에 닿는 Star와 Item은 Player에 적용 되며, Star는 더 높은 점수를 준다.4. Tag를 Player설정한다. (Obstacles의 코드에서, Player와 충돌하면 폭발한다는 코드가 있기 때문에, Shield 코드에서 다루지 않아도 된다.)5. rigidbody는Player와  똑같이 설정하고,  collider는 circle이 아닌 box 4개를 사방에 배치한 형태로 둔다. (그 안에 Player가 들어갈 수 있도록)### Shield 와 fever```	IEnumerator OffShield(float s)	{		yield return new WaitForSeconds(s);		Debug.Log("Off shield");		Shield.SetActive(false);	}	public void Fever()	{		Debug.Log("On Fever");		Shield.SetActive(true);		StartCoroutine(OffShield(8));	}	public void OnShield()	{		Debug.Log("On shield");		Shield.SetActive(true);		StartCoroutine(OffShield(3));	}```1. 위 코드는 Player 스크립트의 일부로, Fever는 UI에서 불리며, OnShield는 Player가 Shield Item과 충돌했을 때 불린다.2. 각 경우 모두 비활성화되어있던 Shield를 활성화하고, OffShield까지의 지연시간 차이가 있다.(아이템은 3초, Fever는 8초)3. IEnumerator를 사용하여 shield 지속시간을 정한다.4. 지금생각났는데 두개가 겹칠때를 대비하여 isfever를 설정해야겠다.### Energe UI```	public void EnergeBarIncrease(float p)	{		float energe = EnergeBar.fillAmount + p;		if (energe >= 1)		{			AcadePlayer.Instance.Fever();			energe = 0;		}		EnergeBar.fillAmount = energe;	}	public void EnergeBarDecrease(float p)	{		float energe = EnergeBar.fillAmount - p;		if (energe < 0) energe = 0;		EnergeBar.fillAmount = energe;	}```1. UIManager 스크립트에서 관리하며, HealthBar와 같이 UISprite 형식인 EnergeBar의 fillAmount를 조절한다.2. Player가 Star와 충돌하면 EnergeBarIncrease(0.1f)를 호출하고, Player가 Obstacles와 충돌하면EnergeBarDecrease(0.2)를 호출한다.3. fillAmount가 1 이상이면, 게이지바가 초기화되는 동시에 Player.Fever()가 호출된다.4. 깔끔한 UI를 위해서, Energe gauge와 Energe bar를 따로 두어 색깔 있는 부분만 fillAmount 조절을 한다! 너무이뻐!### Item```using System.Collections;using System.Collections.Generic;using UnityEngine;public class AcadeItem : MonoBehaviour {	private float speed;	// Use this for initialization	void Start()	{		speed = AcadeGameManager.Instance.GameSpeed;	}	// Update is called once per frame	void Update()	{		if (AcadeGameManager.Instance.isPlaying)		{			this.transform.position -= transform.up * speed * 1.5f;		}	}	private void OnCollisionEnter2D(Collision2D collision)	{		if (collision.transform.tag == "Limit")			GameObject.Destroy(this.gameObject);		else if (collision.transform.tag == "Player")			GameObject.Destroy(this.gameObject);	}}```1. Item들은 종류에 상관없이 속도와 방향, 파괴조건이 같기 때문에, 모든 아이템들은 같은 스크립트를 공유하며, 차이는 Tag로만 정하여 Player가 충돌할때 역할을 체크하도록 한다.